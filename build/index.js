/**
 * @file Sébastien Robaszkiewicz's personal webpage.
 * @author Sébastien Robaszkiewicz [hello@robi.me]
 */

'use strict';

// Libraries and files
var input = require('motion-input');
var animation = require('./animation');

// Configs
var worldConfig = {
  canvasMargin: 0.1, // relative to max(canvas.width, canvas.height)
  filterTimeConstant: 1.5, // seconds
  fadeinDurationVariance: 2, // seconds
  minDistance: 140, // pixels
  minFadeinDuration: 3, // seconds
  minRadius: 4, // pixels
  radiusVariance: 6, // pixels
  velocityFactor: 7, // pixels per second
  vertexDensity: 3 // arbitrary scale from 1 to 10
};
var gameloopConfig = {
  ctx: animation.ctx,
  buffers: [],
  update: animation.update.bind(animation),
  render: animation.render.bind(animation),
  fps: 60
  // gui: gui.model
};

// Media query function
function onResize(mql, name) {
  if (mql.matches) name.innerHTML = 'Sébastien Robaszkiewicz';else name.innerHTML = 'S. Robaszkiewicz';
}

// Script
(function () {
  document.body.addEventListener('touchmove', function (e) {
    e.preventDefault(); // prevents scrolling
  });

  // Update name on media query
  var name = document.querySelector('.title');
  var mql = window.matchMedia('(min-width: 480px)');
  mql.addListener(function () {
    return onResize(mql, name);
  });
  onResize(mql, name);

  // Start canvas animation
  animation.start(worldConfig, gameloopConfig);

  // Start motion input module
  input.init('orientationAlt').then(function (modules) {
    var orientation = modules[0];

    if (orientation.isValid) {
      input.addListener('orientationAlt', function (val) {
        animation.onOrientation(val[1], val[2]);
      });
    }
  });
})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9qcy9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUtBLFlBQVksQ0FBQzs7O0FBR2IsSUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDO0FBQ3RDLElBQU0sU0FBUyxHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQzs7O0FBR3pDLElBQU0sV0FBVyxHQUFHO0FBQ2xCLGNBQVksRUFBRSxHQUFHO0FBQ2pCLG9CQUFrQixFQUFFLEdBQUc7QUFDdkIsd0JBQXNCLEVBQUUsQ0FBQztBQUN6QixhQUFXLEVBQUUsR0FBRztBQUNoQixtQkFBaUIsRUFBRSxDQUFDO0FBQ3BCLFdBQVMsRUFBRSxDQUFDO0FBQ1osZ0JBQWMsRUFBRSxDQUFDO0FBQ2pCLGdCQUFjLEVBQUUsQ0FBQztBQUNqQixlQUFhLEVBQUUsQ0FBQztDQUNqQixDQUFDO0FBQ0YsSUFBTSxjQUFjLEdBQUc7QUFDckIsS0FBRyxFQUFFLFNBQVMsQ0FBQyxHQUFHO0FBQ2xCLFNBQU8sRUFBRSxFQUFFO0FBQ1gsUUFBTSxFQUFFLFNBQVMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQztBQUN4QyxRQUFNLEVBQUUsU0FBUyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDO0FBQ3hDLEtBQUcsRUFBRSxFQUFFOztDQUVSLENBQUM7OztBQUdGLFNBQVMsUUFBUSxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUU7QUFDM0IsTUFBSSxHQUFHLENBQUMsT0FBTyxFQUNiLElBQUksQ0FBQyxTQUFTLEdBQUcseUJBQXlCLENBQUMsS0FFM0MsSUFBSSxDQUFDLFNBQVMsR0FBRyxrQkFBa0IsQ0FBQztDQUN2Qzs7O0FBR0QsQUFBQyxDQUFBLFlBQVc7QUFDVixVQUFRLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFdBQVcsRUFBRSxVQUFDLENBQUMsRUFBSztBQUNqRCxLQUFDLENBQUMsY0FBYyxFQUFFLENBQUM7R0FDcEIsQ0FBQyxDQUFDOzs7QUFHSCxNQUFJLElBQUksR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzVDLE1BQUksR0FBRyxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsb0JBQW9CLENBQUMsQ0FBQztBQUNsRCxLQUFHLENBQUMsV0FBVyxDQUFDO1dBQU0sUUFBUSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUM7R0FBQSxDQUFDLENBQUM7QUFDM0MsVUFBUSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQzs7O0FBR3BCLFdBQVMsQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFLGNBQWMsQ0FBQyxDQUFDOzs7QUFHN0MsT0FBSyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUN6QixJQUFJLENBQUMsVUFBQyxPQUFPLEVBQUs7QUFDakIsUUFBTSxXQUFXLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDOztBQUUvQixRQUFJLFdBQVcsQ0FBQyxPQUFPLEVBQUU7QUFDdkIsV0FBSyxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsRUFBRSxVQUFDLEdBQUcsRUFBSztBQUMzQyxpQkFBUyxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7T0FDekMsQ0FBQyxDQUFDO0tBQ0o7R0FDRixDQUFDLENBQUM7Q0FDTixDQUFBLEVBQUUsQ0FBRSIsImZpbGUiOiJzcmMvanMvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlIFPDqWJhc3RpZW4gUm9iYXN6a2lld2ljeidzIHBlcnNvbmFsIHdlYnBhZ2UuXG4gKiBAYXV0aG9yIFPDqWJhc3RpZW4gUm9iYXN6a2lld2ljeiBbaGVsbG9Acm9iaS5tZV1cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8vIExpYnJhcmllcyBhbmQgZmlsZXNcbmNvbnN0IGlucHV0ID0gcmVxdWlyZSgnbW90aW9uLWlucHV0Jyk7XG5jb25zdCBhbmltYXRpb24gPSByZXF1aXJlKCcuL2FuaW1hdGlvbicpO1xuXG4vLyBDb25maWdzXG5jb25zdCB3b3JsZENvbmZpZyA9IHtcbiAgY2FudmFzTWFyZ2luOiAwLjEsIC8vIHJlbGF0aXZlIHRvIG1heChjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpXG4gIGZpbHRlclRpbWVDb25zdGFudDogMS41LCAvLyBzZWNvbmRzXG4gIGZhZGVpbkR1cmF0aW9uVmFyaWFuY2U6IDIsIC8vIHNlY29uZHNcbiAgbWluRGlzdGFuY2U6IDE0MCwgLy8gcGl4ZWxzXG4gIG1pbkZhZGVpbkR1cmF0aW9uOiAzLCAvLyBzZWNvbmRzXG4gIG1pblJhZGl1czogNCwgLy8gcGl4ZWxzXG4gIHJhZGl1c1ZhcmlhbmNlOiA2LCAvLyBwaXhlbHNcbiAgdmVsb2NpdHlGYWN0b3I6IDcsIC8vIHBpeGVscyBwZXIgc2Vjb25kXG4gIHZlcnRleERlbnNpdHk6IDMgLy8gYXJiaXRyYXJ5IHNjYWxlIGZyb20gMSB0byAxMFxufTtcbmNvbnN0IGdhbWVsb29wQ29uZmlnID0ge1xuICBjdHg6IGFuaW1hdGlvbi5jdHgsXG4gIGJ1ZmZlcnM6IFtdLFxuICB1cGRhdGU6IGFuaW1hdGlvbi51cGRhdGUuYmluZChhbmltYXRpb24pLFxuICByZW5kZXI6IGFuaW1hdGlvbi5yZW5kZXIuYmluZChhbmltYXRpb24pLFxuICBmcHM6IDYwXG4gIC8vIGd1aTogZ3VpLm1vZGVsXG59O1xuXG4vLyBNZWRpYSBxdWVyeSBmdW5jdGlvblxuZnVuY3Rpb24gb25SZXNpemUobXFsLCBuYW1lKSB7XG4gIGlmIChtcWwubWF0Y2hlcylcbiAgICBuYW1lLmlubmVySFRNTCA9ICdTw6liYXN0aWVuIFJvYmFzemtpZXdpY3onO1xuICBlbHNlXG4gICAgbmFtZS5pbm5lckhUTUwgPSAnUy4gUm9iYXN6a2lld2ljeic7XG59XG5cbi8vIFNjcmlwdFxuKGZ1bmN0aW9uKCkge1xuICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvLyBwcmV2ZW50cyBzY3JvbGxpbmdcbiAgfSk7XG5cbiAgLy8gVXBkYXRlIG5hbWUgb24gbWVkaWEgcXVlcnlcbiAgbGV0IG5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGl0bGUnKTtcbiAgbGV0IG1xbCA9IHdpbmRvdy5tYXRjaE1lZGlhKCcobWluLXdpZHRoOiA0ODBweCknKTtcbiAgbXFsLmFkZExpc3RlbmVyKCgpID0+IG9uUmVzaXplKG1xbCwgbmFtZSkpO1xuICBvblJlc2l6ZShtcWwsIG5hbWUpO1xuXG4gIC8vIFN0YXJ0IGNhbnZhcyBhbmltYXRpb25cbiAgYW5pbWF0aW9uLnN0YXJ0KHdvcmxkQ29uZmlnLCBnYW1lbG9vcENvbmZpZyk7XG5cbiAgLy8gU3RhcnQgbW90aW9uIGlucHV0IG1vZHVsZVxuICBpbnB1dC5pbml0KCdvcmllbnRhdGlvbkFsdCcpXG4gICAgLnRoZW4oKG1vZHVsZXMpID0+IHtcbiAgICAgIGNvbnN0IG9yaWVudGF0aW9uID0gbW9kdWxlc1swXTtcblxuICAgICAgaWYgKG9yaWVudGF0aW9uLmlzVmFsaWQpIHtcbiAgICAgICAgaW5wdXQuYWRkTGlzdGVuZXIoJ29yaWVudGF0aW9uQWx0JywgKHZhbCkgPT4ge1xuICAgICAgICAgIGFuaW1hdGlvbi5vbk9yaWVudGF0aW9uKHZhbFsxXSwgdmFsWzJdKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG59KCkpO1xuIl19